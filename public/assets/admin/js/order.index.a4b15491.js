(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["order.index"],{fecb:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,options:t.options,loading:t.loading,"loading-text":"Loading... Please wait","server-items-length":t.totalItems},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Список замовлень")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-select",{attrs:{label:"Статус"}}),a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Picker in menu","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",n,!1),i))]}}]),model:{value:t.calendar,callback:function(e){t.calendar=e},expression:"calendar"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.calendar=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v("OK")])],1)],1),a("v-spacer"),a("CreateOrderDialog")],1)]},proxy:!0},{key:"item.user",fn:function(e){var i=e.item;return[a("b",[t._v(t._s(i.user.full_name))]),a("br"),a("small",[t._v(" Створений "+t._s(i.created_at)+" ")])]}},{key:"item.status_description",fn:function(e){var i=e.item;return[1===i.status?a("v-chip",{attrs:{small:"",outlined:"",color:"warning",dark:""}},[t._v(t._s(i.status_description))]):t._e(),2===i.status||3===i.status?a("v-chip",{attrs:{small:"",outlined:"",color:"success",dark:""}},[t._v(" "+t._s(i.status_description)+" ")]):t._e(),i.status>3?a("v-chip",{attrs:{small:"",outlined:"",color:"red",dark:""}},[t._v(t._s(i.status_description))]):t._e()]}},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"blue"},on:{click:function(e){return t.showItem(i)}}},[t._v("mdi-eye ")]),a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(i)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.getDataFromApi}},[t._v("Reset")])]},proxy:!0}])})},n=[],s=(a("c975"),a("a434"),a("d3b7"),a("3bd4")),o={name:"Index",components:{CreateOrderDialog:s["a"]},data:function(){return{date:(new Date).toISOString().substr(0,10),calendar:!1,loading:!1,headers:[{text:"#",align:"start",sortable:!1,value:"order_id"},{text:"Замовник",value:"user",sortable:!1},{text:"На суму",value:"total_products_price"},{text:"Змінено",value:"updated_at"},{text:"Статус",value:"status_description"},{text:"Дія",value:"actions",sortable:!1}],editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0},totalItems:0,items:[],options:{}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(t){t||this.close()},options:{handler:function(){var t=this;this.getDataFromApi().then((function(e){t.items=e.items,t.totalItems=e.total}))},deep:!0}},created:function(){},methods:{getDataFromApi:function(){var t=this;return this.loading=!0,new Promise((function(e){var a=t.options,i=a.sortBy,n=a.sortDesc,s=a.page,o=a.itemsPerPage,r={url:t.$store.state.api.order.index,params:{page:s,limit:o,sortBy:i,sortDesc:n}};t.$store.dispatch("getApiContent",r).then((function(){var a=t.$store.state.apiLoadedData.data,i=t.$store.state.apiLoadedData.meta.total;e({items:a,total:i})})).finally((function(){t.loading=!1}))}))},showItem:function(t){console.log(t),this.$router.push({path:"/order/show",query:{order:t.links.self}})},editItem:function(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this.desserts.indexOf(t);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(e,1)},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}}},r=o,l=a("2877"),d=a("6544"),c=a.n(d),u=a("8336"),m=a("cc20"),p=a("8fea"),f=a("2e4b"),v=a("ce7e"),h=a("132d"),b=a("e449"),_=a("b974"),x=a("2fa4"),g=a("8654"),I=a("71d9"),k=a("2a7f"),y=Object(l["a"])(r,i,n,!1,null,"01b49745",null);e["default"]=y.exports;c()(y,{VBtn:u["a"],VChip:m["a"],VDataTable:p["a"],VDatePicker:f["a"],VDivider:v["a"],VIcon:h["a"],VMenu:b["a"],VSelect:_["a"],VSpacer:x["a"],VTextField:g["a"],VToolbar:I["a"],VToolbarTitle:k["b"]})}}]);